!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var r,o,i=n(1),u=n(2),a=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,s=t||[],f=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==p){var d=i();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var y=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,h=y-a+(v-c)/1e4;if(h<0&&void 0===e.clockseq&&(p=p+1&16383),(h<0||y>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=y,c=v,o=p;var w=(1e4*(268435455&(y+=122192928e5))+v)%4294967296;s[l++]=w>>>24&255,s[l++]=w>>>16&255,s[l++]=w>>>8&255,s[l++]=255&w;var b=y/4294967296*1e4&268435455;s[l++]=b>>>8&255,s[l++]=255&b,s[l++]=b>>>24&15|16,s[l++]=b>>>16&255,s[l++]=p>>>8|128,s[l++]=255&p;for(var g=0;g<6;++g)s[l+g]=f[g];return t||u(s)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t,n){"use strict";n.r(t);var r,o=function(){function e(){this.delegate=document.createDocumentFragment()}return e.prototype.addEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.delegate.addEventListener.apply(this.delegate,e)},e.prototype.dispatchEvent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.delegate.dispatchEvent.apply(this.delegate,e)},e.prototype.removeEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.delegate.removeEventListener.apply(this.delegate,e)},e}(),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.download=function(e){var t=this;return new Promise(function(n){fetch(e).then(function(e){var r=e.body.getReader(),o=0,i=[],u=function(e){if(!e.done){i.push(e.value),o+=e.value.length;var a=new CustomEvent("progress",{detail:{bytesReceived:o}});return t.dispatchEvent(a),console.log("Received",o,"bytes of data so far"),r.read().then(u)}console.log("Fetch complete");var c=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=0,i=t;o<i.length;o++)r+=(s=i[o]).length;for(var u=new e(r),a=0,c=0,l=t;c<l.length;c++){var s=l[c];u.set(s,a),a+=s.length}return u}.apply(void 0,[Uint8Array].concat(i)),l=URL.createObjectURL(new Blob([c.buffer],{type:"application/octet-stream"}));n(l)};return r.read().then(u)})})},t}(o),a=n(0),c=n.n(a),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,a)}c((r=r.apply(e,t||[])).next())})},f=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.download=function(e){var t=this;return new Promise(function(n,r){var o=function(e){console.error(e),r(e)};(window.requestFileSystem||window.webkitRequestFileSystem)(window.TEMPORARY,1572864e3,function(r){console.log("Opened file system: "+r.name),r.root.getFile(c()()+".pdf",{create:!0},function(r){fetch(e).then(function(e){var o=e.body.getReader(),i=0,u=function(e){return s(t,void 0,void 0,function(){var t;return f(this,function(a){switch(a.label){case 0:return e.done?(console.log("Fetch complete"),n(r.toURL()),[2]):[4,this.writeChunkOnFile(r,e.value)];case 1:return a.sent(),i+=e.value.length,t=new CustomEvent("progress",{detail:{bytesReceived:i}}),this.dispatchEvent(t),console.log("Just received "+e.value.length+" bytes"),console.log("Received",i,"bytes of data so far"),[2,o.read().then(u)]}})})};return o.read().then(u)})},o)},o)})},t.prototype.writeChunkOnFile=function(e,t){return s(this,void 0,void 0,function(){return f(this,function(n){return[2,new Promise(function(n,r){e.createWriter(function(e){e.onwriteend=function(e){n(),console.log("Write completed.")},e.onerror=function(e){r(),console.log("Write failed: "+e.toString())},console.log("written so far = "+e.length),e.seek(e.length);var o=new Blob([t],{type:"application/octet-stream"});e.write(o)},function(e){throw console.error(e),new Error(e)})})]})})},t}(o),d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.download=function(e){return Promise.resolve(e)},t}(o);var v=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,a)}c((r=r.apply(e,t||[])).next())})},h=function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},w=document.getElementById("root");v(void 0,void 0,void 0,function(){var e,t,n,r,o,i;return h(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=document.querySelector("#root a"),(t=document.createElement("div")).className="loading",t.innerHTML="Downloading:",w.replaceChild(t,e),c=window.requestFileSystem||window.webkitRequestFileSystem,(n=window.fetch&&window.ReadableStream?c?new p:new u:new y).addEventListener("progress",function(e){var n=Math.floor(e.detail.bytesReceived/2074956491*100);t.innerHTML="Downloading: "+n+"%"}),[4,n.download("files/package.zip")];case 1:return r=a.sent(),(o=document.createElement("a")).href=r,o.download="package.zip",o.innerHTML="Save",w.replaceChild(o,t),[3,3];case 2:return i=a.sent(),console.error(i),[3,3];case 3:return[2]}var c})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3JuZy1icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRGVsZWdhdGVkRXZlbnRUYXJnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkZXJzL01lbW9yeURvd25sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkZXJzL0ZpbGVTeXN0ZW1Eb3dubG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9kb3dubG9hZGVycy9TaW1wbGVEb3dubG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkZXJGYWN0b3J5LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX25vZGVJZCIsIl9jbG9ja3NlcSIsInJuZyIsImJ5dGVzVG9VdWlkIiwiX2xhc3RNU2VjcyIsIl9sYXN0TlNlY3MiLCJvcHRpb25zIiwiYnVmIiwib2Zmc2V0IiwiYiIsIm5vZGUiLCJjbG9ja3NlcSIsInVuZGVmaW5lZCIsInNlZWRCeXRlcyIsIm1zZWNzIiwiRGF0ZSIsImdldFRpbWUiLCJuc2VjcyIsImR0IiwiRXJyb3IiLCJ0bCIsInRtaCIsImdldFJhbmRvbVZhbHVlcyIsImNyeXB0byIsIndpbmRvdyIsIm1zQ3J5cHRvIiwicm5kczgiLCJVaW50OEFycmF5Iiwicm5kcyIsIkFycmF5IiwiTWF0aCIsInJhbmRvbSIsImJ5dGVUb0hleCIsInRvU3RyaW5nIiwic3Vic3RyIiwiYnRoIiwiam9pbiIsIkRlbGVnYXRlZEV2ZW50VGFyZ2V0IiwidGhpcyIsImRlbGVnYXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiZGlzcGF0Y2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfc3VwZXIiLCJNZW1vcnlEb3dubG9hZGVyIiwiX19leHRlbmRzIiwiZG93bmxvYWQiLCJzcmMiLCJfdGhpcyIsIlByb21pc2UiLCJyZXNvbHZlIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJyZWFkZXIiLCJib2R5IiwiZ2V0UmVhZGVyIiwiYnl0ZXNSZWNlaXZlZCIsImNvbnRlbnQiLCJwcm9jZXNzUmVzdWx0IiwicmVzdWx0IiwiZG9uZSIsInB1c2giLCJldmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiY29uc29sZSIsImxvZyIsInJlYWQiLCJ0eXBlZEFycmF5IiwicmVzdWx0Q29uc3RydWN0b3IiLCJhcnJheXMiLCJ0b3RhbExlbmd0aCIsIl9hIiwiYXJyYXlzXzEiLCJhcnIiLCJfYiIsImFycmF5c18yIiwic2V0IiwiY29uY2F0Iiwib2JqZWN0VVJMIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsImJ1ZmZlciIsInR5cGUiLCJGaWxlU3lzdGVtRG93bmxvYWRlciIsIkZpbGVTeXN0ZW1Eb3dubG9hZGVyX2V4dGVuZHMiLCJyZWplY3QiLCJlcnJvckhhbmRsZXIiLCJlcnIiLCJlcnJvciIsInJlcXVlc3RGaWxlU3lzdGVtIiwid2Via2l0UmVxdWVzdEZpbGVTeXN0ZW0iLCJURU1QT1JBUlkiLCJmaWxlU3lzdGVtIiwicm9vdCIsImdldEZpbGUiLCJ2MV9kZWZhdWx0IiwiZmlsZUVudHJ5IiwiX19hd2FpdGVyIiwidG9VUkwiLCJ3cml0ZUNodW5rT25GaWxlIiwic2VudCIsImRhdGEiLCJjcmVhdGVXcml0ZXIiLCJmaWxlV3JpdGVyIiwib253cml0ZWVuZCIsImUiLCJvbmVycm9yIiwic2VlayIsImJsb2IiLCJ3cml0ZSIsIlNpbXBsZURvd25sb2FkZXIiLCJTaW1wbGVEb3dubG9hZGVyX2V4dGVuZHMiLCJnZXRFbGVtZW50QnlJZCIsImFwcF9hd2FpdGVyIiwiYW5jaG9yIiwicXVlcnlTZWxlY3RvciIsImxvYWRpbmdfMSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJyZXBsYWNlQ2hpbGQiLCJkb3dubG9hZGVyIiwiUmVhZGFibGVTdHJlYW0iLCJkb3dubG9hZGVyc19GaWxlU3lzdGVtRG93bmxvYWRlciIsImRvd25sb2FkZXJzX01lbW9yeURvd25sb2FkZXIiLCJkb3dubG9hZGVyc19TaW1wbGVEb3dubG9hZGVyIiwicmF0ZSIsImZsb29yIiwibG9hZGluZ1N0cmluZ18xIiwiZG93bmxvYWRVUkwiLCJidXR0b24iLCJocmVmIiwiZXJyXzEiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFB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Q2Q4QixFQUFTcEcsU0FBU3VGLGNBQWMsTUFDL0JjLEtBQU9GLEVBQ2RDLEVBQU92RixTQUFXLGNBQ2xCdUYsRUFBT1gsVUFBWSxPQUVuQjFCLEVBQUsyQixhQUFhVSxFQUFRZCxrQ0FFMUJyRCxRQUFReUIsTUFBTTRDLDBCQ3hCSCxJQVlQM0MiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Jyb29mYS9ub2RlLXV1aWQgZm9yIEFQSSBkZXRhaWxzXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgW107XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7XG5cbiAgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBybmcoKTtcbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC41LCBjcmVhdGUgYW5kIDQ4LWJpdCBub2RlIGlkLCAoNDcgcmFuZG9tIGJpdHMgKyBtdWx0aWNhc3QgYml0ID0gMSlcbiAgICAgIG5vZGUgPSBfbm9kZUlkID0gW1xuICAgICAgICBzZWVkQnl0ZXNbMF0gfCAweDAxLFxuICAgICAgICBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XVxuICAgICAgXTtcbiAgICB9XG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9XG5cbiAgLy8gVVVJRCB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc29cbiAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG4gIHZhciBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG4gIHZhciBuc2VjcyA9IG9wdGlvbnMubnNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNlY3MgOiBfbGFzdE5TZWNzICsgMTtcblxuICAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG4gIHZhciBkdCA9IChtc2VjcyAtIF9sYXN0TVNlY3MpICsgKG5zZWNzIC0gX2xhc3ROU2VjcykvMTAwMDA7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIEJ1bXAgY2xvY2tzZXEgb24gY2xvY2sgcmVncmVzc2lvblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9XG5cbiAgLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgLy8gdGltZSBpbnRlcnZhbFxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfVxuXG4gIC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcbiAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1dWlkLnYxKCk6IENhblxcJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjJyk7XG4gIH1cblxuICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gIF9sYXN0TlNlY3MgPSBuc2VjcztcbiAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7XG5cbiAgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG4gIG1zZWNzICs9IDEyMjE5MjkyODAwMDAwO1xuXG4gIC8vIGB0aW1lX2xvd2BcbiAgdmFyIHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjtcblxuICAvLyBgdGltZV9taWRgXG4gIHZhciB0bWggPSAobXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwKSAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjtcblxuICAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmO1xuXG4gIC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7XG5cbiAgLy8gYGNsb2NrX3NlcV9sb3dgXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjtcblxuICAvLyBgbm9kZWBcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmID8gYnVmIDogYnl0ZXNUb1V1aWQoYik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjE7XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiAgSW4gdGhlXG4vLyBicm93c2VyIHRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQgZHVlIHRvIHVua25vd24gcXVhbGl0eSBvZiBNYXRoLnJhbmRvbSgpXG4vLyBhbmQgaW5jb25zaXN0ZW50IHN1cHBvcnQgZm9yIHRoZSBgY3J5cHRvYCBBUEkuICBXZSBkbyB0aGUgYmVzdCB3ZSBjYW4gdmlhXG4vLyBmZWF0dXJlLWRldGVjdGlvblxuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG9cbi8vIGltcGxlbWVudGF0aW9uLiBBbHNvLCBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gb24gSUUxMS5cbnZhciBnZXRSYW5kb21WYWx1ZXMgPSAodHlwZW9mKGNyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG1zQ3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSk7XG5cbmlmIChnZXRSYW5kb21WYWx1ZXMpIHtcbiAgLy8gV0hBVFdHIGNyeXB0byBSTkcgLSBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvQ3J5cHRvXG4gIHZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd2hhdHdnUk5HKCkge1xuICAgIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG4gICAgcmV0dXJuIHJuZHM4O1xuICB9O1xufSBlbHNlIHtcbiAgLy8gTWF0aC5yYW5kb20oKS1iYXNlZCAoUk5HKVxuICAvL1xuICAvLyBJZiBhbGwgZWxzZSBmYWlscywgdXNlIE1hdGgucmFuZG9tKCkuICBJdCdzIGZhc3QsIGJ1dCBpcyBvZiB1bnNwZWNpZmllZFxuICAvLyBxdWFsaXR5LlxuICB2YXIgcm5kcyA9IG5ldyBBcnJheSgxNik7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXRoUk5HKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCByOyBpIDwgMTY7IGkrKykge1xuICAgICAgaWYgKChpICYgMHgwMykgPT09IDApIHIgPSBNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwMDA7XG4gICAgICBybmRzW2ldID0gciA+Pj4gKChpICYgMHgwMykgPDwgMykgJiAweGZmO1xuICAgIH1cblxuICAgIHJldHVybiBybmRzO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1dKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcbiIsIi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxMzQzMzIyL2V4dGVuZGluZy1ldmVudHRhcmdldC1pbi10eXBlc2NyaXB0LWFuZ3VsYXItMlxuZXhwb3J0IGNsYXNzIERlbGVnYXRlZEV2ZW50VGFyZ2V0IGltcGxlbWVudHMgRXZlbnRUYXJnZXQge1xuICBwcml2YXRlIGRlbGVnYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIGFkZEV2ZW50TGlzdGVuZXIoLi4uYXJnczogYW55KTogdm9pZCB7XG4gICAgdGhpcy5kZWxlZ2F0ZS5hZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMuZGVsZWdhdGUsIGFyZ3MpO1xuICB9XG5cbiAgZGlzcGF0Y2hFdmVudCguLi5hcmdzOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5kaXNwYXRjaEV2ZW50LmFwcGx5KHRoaXMuZGVsZWdhdGUsIGFyZ3MpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lciguLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5yZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMuZGVsZWdhdGUsIGFyZ3MpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEb3dubG9hZGVyIH0gZnJvbSBcIi4vRG93bmxvYWRlclwiO1xuaW1wb3J0IHsgRGVsZWdhdGVkRXZlbnRUYXJnZXQgfSBmcm9tIFwiLi4vRGVsZWdhdGVkRXZlbnRUYXJnZXRcIjtcblxuZnVuY3Rpb24gY29uY2F0ZW5hdGUocmVzdWx0Q29uc3RydWN0b3I6IGFueSwgLi4uYXJyYXlzOiBhbnkpIHtcbiAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgZm9yIChsZXQgYXJyIG9mIGFycmF5cykge1xuICAgICAgdG90YWxMZW5ndGggKz0gYXJyLmxlbmd0aDtcbiAgfVxuICBsZXQgcmVzdWx0ID0gbmV3IHJlc3VsdENvbnN0cnVjdG9yKHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAobGV0IGFyciBvZiBhcnJheXMpIHtcbiAgICAgIHJlc3VsdC5zZXQoYXJyLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IGFyci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVtb3J5RG93bmxvYWRlciBleHRlbmRzIERlbGVnYXRlZEV2ZW50VGFyZ2V0IGltcGxlbWVudHMgRG93bmxvYWRlciB7XG4gIGRvd25sb2FkKHNyYzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGZldGNoKHNyYykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIC8vIHJlc3BvbnNlLmJvZHkgaXMgYSByZWFkYWJsZSBzdHJlYW0uXG4gICAgICAgIC8vIENhbGxpbmcgZ2V0UmVhZGVyKCkgZ2l2ZXMgdXMgZXhjbHVzaXZlIGFjY2VzcyB0b1xuICAgICAgICAvLyB0aGUgc3RyZWFtJ3MgY29udGVudFxuICAgICAgICB2YXIgcmVhZGVyID0gcmVzcG9uc2UuYm9keSEhLmdldFJlYWRlcigpO1xuICAgICAgICB2YXIgYnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgICAgIGxldCBjb250ZW50OiBhbnkgPSBbXTtcblxuICAgICAgICBjb25zdCBwcm9jZXNzUmVzdWx0ID0gKHJlc3VsdDogYW55KTogYW55ID0+IHtcbiAgICAgICAgICAvLyBSZXN1bHQgb2JqZWN0cyBjb250YWluIHR3byBwcm9wZXJ0aWVzOlxuICAgICAgICAgIC8vIGRvbmUgIC0gdHJ1ZSBpZiB0aGUgc3RyZWFtIGhhcyBhbHJlYWR5IGdpdmVuXG4gICAgICAgICAgLy8gICAgICAgICB5b3UgYWxsIGl0cyBkYXRhLlxuICAgICAgICAgIC8vIHZhbHVlIC0gc29tZSBkYXRhLiBBbHdheXMgdW5kZWZpbmVkIHdoZW5cbiAgICAgICAgICAvLyAgICAgICAgIGRvbmUgaXMgdHJ1ZS5cbiAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggY29tcGxldGVcIik7XG4gICAgICAgICAgICBjb25zdCB0eXBlZEFycmF5ID0gY29uY2F0ZW5hdGUoVWludDhBcnJheSwgLi4uY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKFxuICAgICAgICAgICAgICBuZXcgQmxvYihbdHlwZWRBcnJheS5idWZmZXJdLCB7dHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSd9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc29sdmUob2JqZWN0VVJMKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZW50LnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAvLyByZXN1bHQudmFsdWUgZm9yIGZldGNoIHN0cmVhbXMgaXMgYSBVaW50OEFycmF5XG4gICAgICAgICAgYnl0ZXNSZWNlaXZlZCArPSByZXN1bHQudmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQnLCBieXRlc1JlY2VpdmVkLCAnYnl0ZXMgb2YgZGF0YSBzbyBmYXInKTtcblxuICAgICAgICAgIC8vIFJlYWQgc29tZSBtb3JlLCBhbmQgY2FsbCB0aGlzIGZ1bmN0aW9uIGFnYWluXG4gICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbihwcm9jZXNzUmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlYWQoKSByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gICAgICAgIC8vIHdoZW4gYSB2YWx1ZSBoYXMgYmVlbiByZWNlaXZlZFxuICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3NSZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgdXVpZHYxIGZyb20gJ3V1aWQvdjEnO1xuaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL0Rvd25sb2FkZXJcIjtcbmltcG9ydCB7IERlbGVnYXRlZEV2ZW50VGFyZ2V0IH0gZnJvbSAnLi4vRGVsZWdhdGVkRXZlbnRUYXJnZXQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlU3lzdGVtRG93bmxvYWRlciBleHRlbmRzIERlbGVnYXRlZEV2ZW50VGFyZ2V0IGltcGxlbWVudHMgRG93bmxvYWRlciB7XG4gIGRvd25sb2FkKHNyYzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gdXRpbCBoYW5kbGVyIHVzZWQgYmVsb3dcbiAgICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IChlcnI6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfTtcblxuICAgICAgLy8gYWNjZXNzaW5nIEZpbGVTeXN0ZW0gQVBJc1xuICAgICAgY29uc3QgcmVxdWVzdEZpbGVTeXN0ZW0gPSAod2luZG93IGFzIGFueSkucmVxdWVzdEZpbGVTeXN0ZW0gfHxcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtO1xuXG4gICAgICBjb25zdCBvbkluaXRGcyA9IChmaWxlU3lzdGVtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5lZCBmaWxlIHN5c3RlbTogJyArIGZpbGVTeXN0ZW0ubmFtZSk7XG4gICAgICAgIC8vIHNlY3VyZSBhY2Nlc3MgdG8gZmlsZSBiZWZvcmUgZG93bmxvYWRpbmcgZGF0YVxuICAgICAgICBmaWxlU3lzdGVtLnJvb3QuZ2V0RmlsZShgJHt1dWlkdjEoKX0ucGRmYCwge2NyZWF0ZTogdHJ1ZX0sIChmaWxlRW50cnk6IGFueSkgPT4ge1xuICAgICAgICAgIGZldGNoKHNyYykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAvLyByZXNwb25zZS5ib2R5IGlzIGEgcmVhZGFibGUgc3RyZWFtLlxuICAgICAgICAgICAgLy8gQ2FsbGluZyBnZXRSZWFkZXIoKSBnaXZlcyB1cyBleGNsdXNpdmUgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyB0aGUgc3RyZWFtJ3MgY29udGVudFxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhIS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHZhciBieXRlc1JlY2VpdmVkID0gMDtcblxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc1Jlc3VsdCA9IGFzeW5jIChyZXN1bHQ6IGFueSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgLy8gcmVzb2x2aW5nIHdpdGggZG93bmxvYWQgbGluayBvbmNlIGFsbCBkYXRhIGhhcyBiZWVuIGRvd25sb2FkZWRcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZpbGVFbnRyeS50b1VSTCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlQ2h1bmtPbkZpbGUoZmlsZUVudHJ5LCByZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkICs9IHJlc3VsdC52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgYnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSnVzdCByZWNlaXZlZCAke3Jlc3VsdC52YWx1ZS5sZW5ndGh9IGJ5dGVzYCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCcsIGJ5dGVzUmVjZWl2ZWQsICdieXRlcyBvZiBkYXRhIHNvIGZhcicpO1xuXG4gICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4ocHJvY2Vzc1Jlc3VsdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4ocHJvY2Vzc1Jlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIGVycm9ySGFuZGxlcik7XG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3RGaWxlU3lzdGVtKFxuICAgICAgICAod2luZG93IGFzIGFueSkuVEVNUE9SQVJZLFxuICAgICAgICA1KjMwMCoxMDI0KjEwMjQgLyozMDBNQiovLFxuICAgICAgICBvbkluaXRGcyxcbiAgICAgICAgZXJyb3JIYW5kbGVyXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB3cml0ZUNodW5rT25GaWxlKGZpbGVFbnRyeTogYW55LCBkYXRhOiBVaW50OEFycmF5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZpbGVFbnRyeS5jcmVhdGVXcml0ZXIoKGZpbGVXcml0ZXI6IGFueSkgPT4ge1xuICAgICAgICBmaWxlV3JpdGVyLm9ud3JpdGVlbmQgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1dyaXRlIGNvbXBsZXRlZC4nKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmaWxlV3JpdGVyLm9uZXJyb3IgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV3JpdGUgZmFpbGVkOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coYHdyaXR0ZW4gc28gZmFyID0gJHtmaWxlV3JpdGVyLmxlbmd0aH1gKTtcbiAgICAgICAgZmlsZVdyaXRlci5zZWVrKGZpbGVXcml0ZXIubGVuZ3RoKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgQmxvYiBhbmQgd3JpdGUgaXQuXG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJ30pO1xuXG4gICAgICAgIGZpbGVXcml0ZXIud3JpdGUoYmxvYik7XG4gICAgICB9LCAoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL0Rvd25sb2FkZXJcIjtcbmltcG9ydCB7IERlbGVnYXRlZEV2ZW50VGFyZ2V0IH0gZnJvbSBcIi4uL0RlbGVnYXRlZEV2ZW50VGFyZ2V0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpbXBsZURvd25sb2FkZXIgZXh0ZW5kcyBEZWxlZ2F0ZWRFdmVudFRhcmdldCBpbXBsZW1lbnRzIERvd25sb2FkZXIge1xuICBkb3dubG9hZChzcmM6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzcmMpO1xuICB9XG59IiwiaW1wb3J0IGNyZWF0ZURvd25sb2FkZXIgZnJvbSAnLi9kb3dubG9hZGVyRmFjdG9yeSc7XG5cbi8vIHRoaXMgd291bGQgYmUgbm9ybWFsbHkgYXZhaWxhYmxlIGFzIG1ldGFkYXRhIG9mIHRoZSBmaWxlXG5jb25zdCBUT1RBTF9CWVRFUyA9IDIwNzQ5NTY0OTE7XG5cbmNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuXG5jb25zdCBzdGFydEFwcCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm9vdCBhJyk7XG4gICAgY29uc3QgbG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxvYWRpbmcuY2xhc3NOYW1lID0gJ2xvYWRpbmcnO1xuICAgIGNvbnN0IGxvYWRpbmdTdHJpbmcgPSBcIkRvd25sb2FkaW5nOlwiO1xuICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gbG9hZGluZ1N0cmluZztcbiAgICByb290LnJlcGxhY2VDaGlsZChsb2FkaW5nLCBhbmNob3IpO1xuXG4gICAgY29uc3QgZG93bmxvYWRlciA9IGNyZWF0ZURvd25sb2FkZXIoKTtcbiAgICBkb3dubG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGNvbnN0IHJhdGUgPSBNYXRoLmZsb29yKChlLmRldGFpbC5ieXRlc1JlY2VpdmVkIC8gVE9UQUxfQllURVMpICogMTAwKTtcbiAgICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gYCR7bG9hZGluZ1N0cmluZ30gJHtyYXRlfSVgO1xuICAgIH0pO1xuICAgIGNvbnN0IGRvd25sb2FkVVJMID0gYXdhaXQgZG93bmxvYWRlci5kb3dubG9hZCgnZmlsZXMvcGFja2FnZS56aXAnKTtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYnV0dG9uLmhyZWYgPSBkb3dubG9hZFVSTDtcbiAgICBidXR0b24uZG93bmxvYWQgPSBcInBhY2thZ2UuemlwXCI7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9IFwiU2F2ZVwiO1xuXG4gICAgcm9vdC5yZXBsYWNlQ2hpbGQoYnV0dG9uLCBsb2FkaW5nKTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH1cbn1cblxuc3RhcnRBcHAoKTtcbiIsImltcG9ydCBNZW1vcnlEb3dubG9hZGVyIGZyb20gXCIuL2Rvd25sb2FkZXJzL01lbW9yeURvd25sb2FkZXJcIjtcbmltcG9ydCBGaWxlU3lzdGVtRG93bmxvYWRlciBmcm9tIFwiLi9kb3dubG9hZGVycy9GaWxlU3lzdGVtRG93bmxvYWRlclwiO1xuaW1wb3J0IFNpbXBsZURvd25sb2FkZXIgZnJvbSBcIi4vZG93bmxvYWRlcnMvU2ltcGxlRG93bmxvYWRlclwiO1xuaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL2Rvd25sb2FkZXJzL0Rvd25sb2FkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlRG93bmxvYWRlcigpOiBEb3dubG9hZGVyIHtcbiAgLyoqXG4gICAqIEZpcnN0IG9mIGFsbCBjaGVja3MgaWYgc3RyZWFtcyBhbmQgZmV0Y2ggYXJlIGF2YWlsYWJsZSwgdGhlblxuICAgKiBjaGVja3MgZm9yIEZpbGVTeXN0ZW0gQVBJcyBhdmFpbGFiaWxpdHksIGZhbGxpbmcgYmFjayB0b1xuICAgKiBhbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24uXG4gICAqIElmIHN0cmVhbXMgYW5kIGZldGNoIGFyZSBub3QgYXZhaWxhYmxlLFxuICAgKiByZXR1cm5zIGFuIFwiaWRlbnRpdHlcIiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogRmlsZVN5c3RlbURvd25sb2FkZXIgYW5kIE1lbW9yeSB1c2UgQ3VzdG9tRXZlbnQgYXMgd2VsbCwgdGhhdCBpc1xuICAgKiBzdXBwb3J0ZWQgYnkgZXZlcnkgYnJvd3NlciBzdXBwb3J0aW5nIFJlYWRhYmxlU3RyZWFtcyxcbiAgICogdGhhdCdzIHdoeSBJJ20gbm90IGNoZWNraW5nIGV4cGxpY2l0bHlcbiAgICovXG4gIGNvbnN0IHJlcXVlc3RGaWxlU3lzdGVtID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVlc3RGaWxlU3lzdGVtIHx8XG4gICAgKHdpbmRvdyBhcyBhbnkpLndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtO1xuICBjb25zdCBmZXRjaEFuZFN0cmVhbXNFeGlzdHMgPSAhISh3aW5kb3cgYXMgYW55KS5mZXRjaCAmJlxuICAgICEhKHdpbmRvdyBhcyBhbnkpLlJlYWRhYmxlU3RyZWFtO1xuXG4gIGlmKGZldGNoQW5kU3RyZWFtc0V4aXN0cykge1xuICAgIGlmIChyZXF1ZXN0RmlsZVN5c3RlbSkge1xuICAgICAgcmV0dXJuIG5ldyBGaWxlU3lzdGVtRG93bmxvYWRlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IE1lbW9yeURvd25sb2FkZXIoKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBTaW1wbGVEb3dubG9hZGVyKCk7XG4gIH1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9