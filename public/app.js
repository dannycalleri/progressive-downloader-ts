!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){var r,o,i=t(1),u=t(2),c=0,a=0;e.exports=function(e,n,t){var l=n&&t||0,f=n||[],s=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:o;if(null==s||null==d){var p=i();null==s&&(s=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var y=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:a+1,h=y-c+(v-a)/1e4;if(h<0&&void 0===e.clockseq&&(d=d+1&16383),(h<0||y>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=y,a=v,o=d;var w=(1e4*(268435455&(y+=122192928e5))+v)%4294967296;f[l++]=w>>>24&255,f[l++]=w>>>16&255,f[l++]=w>>>8&255,f[l++]=255&w;var b=y/4294967296*1e4&268435455;f[l++]=b>>>8&255,f[l++]=255&b,f[l++]=b>>>24&15|16,f[l++]=b>>>16&255,f[l++]=d>>>8|128,f[l++]=255&d;for(var m=0;m<6;++m)f[l+m]=s[m];return n||u(f)}},function(e,n){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o}}},function(e,n){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,n,t){"use strict";t.r(n);var r=function(){function e(){}return e.prototype.download=function(e){return new Promise(function(n){fetch(e).then(function(e){var t=e.body.getReader(),r=0,o=[];return t.read().then(function e(i){if(!i.done)return o.push(i.value),r+=i.value.length,console.log("Received",r,"bytes of data so far"),t.read().then(e);console.log("Fetch complete");var u=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0,o=0,i=n;o<i.length;o++)r+=(f=i[o]).length;for(var u=new e(r),c=0,a=0,l=n;a<l.length;a++){var f=l[a];u.set(f,c),c+=f.length}return u}.apply(void 0,[Uint8Array].concat(o)),c=URL.createObjectURL(new Blob([u.buffer],{type:"application/octet-stream"}));n(c)})})})},e}(),o=t(0),i=t.n(o),u=function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},c=function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},a=function(){function e(){}return e.prototype.download=function(e){var n=this;return new Promise(function(t,r){var o=function(e){console.error(e),r(e)};(window.requestFileSystem||window.webkitRequestFileSystem)(window.TEMPORARY,1572864e3,function(r){console.log("Opened file system: "+r.name),r.root.getFile(i()()+".pdf",{create:!0},function(r){fetch(e).then(function(e){var o=e.body.getReader(),i=0,a=function(e){return u(n,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return e.done?(console.log("Fetch complete"),t(r.toURL()),[2]):[4,this.writeChunkOnFile(r,e.value)];case 1:return n.sent(),i+=e.value.length,console.log("Just received "+e.value.length+" bytes"),console.log("Received",i,"bytes of data so far"),[2,o.read().then(a)]}})})};return o.read().then(a)})},o)},o)})},e.prototype.writeChunkOnFile=function(e,n){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(t,r){e.createWriter(function(e){e.onwriteend=function(e){t(),console.log("Write completed.")},e.onerror=function(e){r(),console.log("Write failed: "+e.toString())},console.log("written so far = "+e.length),e.seek(e.length);var o=new Blob([n],{type:"application/octet-stream"});e.write(o)},function(e){throw console.error(e),new Error(e)})})]})})},e}(),l=function(){function e(){}return e.prototype.download=function(e){return Promise.resolve(e)},e}();var f=function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},s=function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},d=document.getElementById("root");f(void 0,void 0,void 0,function(){var e,n,t,o,i;return s(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e=document.querySelector("#root a"),(n=document.createElement("div")).className="loading",n.innerHTML="Loading...",d.replaceChild(n,e),c=window.requestFileSystem||window.webkitRequestFileSystem,[4,(window.fetch&&window.ReadableStream?c?new a:new r:new l).download("files/book.pdf")];case 1:return t=u.sent(),(o=document.createElement("a")).href=t,o.download="book.pdf",o.innerHTML="Download",d.replaceChild(o,n),[3,3];case 2:return i=u.sent(),console.error(i),[3,3];case 3:return[2]}var c})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3JuZy1icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlcnMvTWVtb3J5RG93bmxvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlcnMvRmlsZVN5c3RlbURvd25sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rvd25sb2FkZXJzL1NpbXBsZURvd25sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlckZhY3RvcnkudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm9wdGlvbnMiLCJidWYiLCJvZmZzZXQiLCJiIiwibm9kZSIsImNsb2Nrc2VxIiwidW5kZWZpbmVkIiwic2VlZEJ5dGVzIiwibXNlY3MiLCJEYXRlIiwiZ2V0VGltZSIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwid2luZG93IiwibXNDcnlwdG8iLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmRzIiwiQXJyYXkiLCJNYXRoIiwicmFuZG9tIiwiYnl0ZVRvSGV4IiwidG9TdHJpbmciLCJzdWJzdHIiLCJidGgiLCJqb2luIiwiTWVtb3J5RG93bmxvYWRlciIsImRvd25sb2FkIiwic3JjIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInJlYWRlciIsImJvZHkiLCJnZXRSZWFkZXIiLCJieXRlc1JlY2VpdmVkIiwiY29udGVudCIsInJlYWQiLCJwcm9jZXNzUmVzdWx0IiwicmVzdWx0IiwiZG9uZSIsInB1c2giLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwidHlwZWRBcnJheSIsInJlc3VsdENvbnN0cnVjdG9yIiwiYXJyYXlzIiwiX2kiLCJhcmd1bWVudHMiLCJ0b3RhbExlbmd0aCIsIl9hIiwiYXJyYXlzXzEiLCJhcnIiLCJfYiIsImFycmF5c18yIiwic2V0IiwiYXBwbHkiLCJjb25jYXQiLCJvYmplY3RVUkwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJCbG9iIiwiYnVmZmVyIiwidHlwZSIsIkZpbGVTeXN0ZW1Eb3dubG9hZGVyIiwiX3RoaXMiLCJ0aGlzIiwicmVqZWN0IiwiZXJyb3JIYW5kbGVyIiwiZXJyIiwiZXJyb3IiLCJyZXF1ZXN0RmlsZVN5c3RlbSIsIndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtIiwiVEVNUE9SQVJZIiwiZmlsZVN5c3RlbSIsInJvb3QiLCJnZXRGaWxlIiwidjFfZGVmYXVsdCIsImZpbGVFbnRyeSIsIl9fYXdhaXRlciIsInRvVVJMIiwid3JpdGVDaHVua09uRmlsZSIsInNlbnQiLCJkYXRhIiwiY3JlYXRlV3JpdGVyIiwiZmlsZVdyaXRlciIsIm9ud3JpdGVlbmQiLCJlIiwib25lcnJvciIsInNlZWsiLCJibG9iIiwid3JpdGUiLCJTaW1wbGVEb3dubG9hZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFwcF9hd2FpdGVyIiwiYW5jaG9yIiwicXVlcnlTZWxlY3RvciIsImxvYWRpbmciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiaW5uZXJIVE1MIiwicmVwbGFjZUNoaWxkIiwiUmVhZGFibGVTdHJlYW0iLCJkb3dubG9hZGVyc19GaWxlU3lzdGVtRG93bmxvYWRlciIsImRvd25sb2FkZXJzX01lbW9yeURvd25sb2FkZXIiLCJkb3dubG9hZGVyc19TaW1wbGVEb3dubG9hZGVyIiwiZG93bmxvYWRVUkwiLCJidXR0b24iLCJocmVmIiwiZXJyXzEiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUs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cEIsS0FBTSw2QkFFckNzQixFQUFXTSxNQUFNRCxJQUNoQixTQUFDckIsR0FFRixNQURBM0IsUUFBUTRCLE1BQU1ELEdBQ1IsSUFBSWhFLE1BQU1nRSxhQUl4QkwsRUEvRUEsS0NEQSxvQkFBQTRCLEtBSUEsT0FIRUEsRUFBQTlHLFVBQUEwQyxTQUFBLFNBQVNDLEdBQ1AsT0FBT0MsUUFBUUMsUUFBUUYsSUFFM0JtRSxFQUpBLG16Q0NHTWpCLEVBQU9rQixTQUFTQyxlQUFlLFFBRXBCQyxPQVBqQmpHLE9BT2lCLG1GQVNPLDZCQVBka0csRUFBU0gsU0FBU0ksY0FBYyxZQUNoQ0MsRUFBVUwsU0FBU00sY0FBYyxRQUMvQkMsVUFBWSxVQUNwQkYsRUFBUUcsVUFBWSxhQUNwQjFCLEVBQUsyQixhQUFhSixFQUFTRixHQ0l2QnpCLEVBQXFCN0QsT0FBZTZELG1CQUN2QzdELE9BQWU4RCx3QkRGSSxJQ0dXOUQsT0FBZWtCLE9BQzNDbEIsT0FBZTZGLGVBR2RoQyxFQUNLLElBQUlpQyxFQUVKLElBQUlDLEVBR04sSUFBSUMsR0RiMEJsRixTQUFTLGlDQUF4Q21GLEVBQWN6RCxFQUFBZ0MsUUFDZDBCLEVBQVNmLFNBQVNNLGNBQWMsTUFDL0JVLEtBQU9GLEVBQ2RDLEVBQU9wRixTQUFXLFdBQ2xCb0YsRUFBT1AsVUFBWSxXQUVuQjFCLEVBQUsyQixhQUFhTSxFQUFRVixrQ0FFMUJ4RCxRQUFRNEIsTUFBTXdDLDBCQ25CSCxJQVlQdkMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Jyb29mYS9ub2RlLXV1aWQgZm9yIEFQSSBkZXRhaWxzXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgW107XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7XG5cbiAgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBybmcoKTtcbiAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC41LCBjcmVhdGUgYW5kIDQ4LWJpdCBub2RlIGlkLCAoNDcgcmFuZG9tIGJpdHMgKyBtdWx0aWNhc3QgYml0ID0gMSlcbiAgICAgIG5vZGUgPSBfbm9kZUlkID0gW1xuICAgICAgICBzZWVkQnl0ZXNbMF0gfCAweDAxLFxuICAgICAgICBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XVxuICAgICAgXTtcbiAgICB9XG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9XG5cbiAgLy8gVVVJRCB0aW1lc3RhbXBzIGFyZSAxMDAgbmFuby1zZWNvbmQgdW5pdHMgc2luY2UgdGhlIEdyZWdvcmlhbiBlcG9jaCxcbiAgLy8gKDE1ODItMTAtMTUgMDA6MDApLiAgSlNOdW1iZXJzIGFyZW4ndCBwcmVjaXNlIGVub3VnaCBmb3IgdGhpcywgc29cbiAgLy8gdGltZSBpcyBoYW5kbGVkIGludGVybmFsbHkgYXMgJ21zZWNzJyAoaW50ZWdlciBtaWxsaXNlY29uZHMpIGFuZCAnbnNlY3MnXG4gIC8vICgxMDAtbmFub3NlY29uZHMgb2Zmc2V0IGZyb20gbXNlY3MpIHNpbmNlIHVuaXggZXBvY2gsIDE5NzAtMDEtMDEgMDA6MDAuXG4gIHZhciBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG4gIHZhciBuc2VjcyA9IG9wdGlvbnMubnNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubnNlY3MgOiBfbGFzdE5TZWNzICsgMTtcblxuICAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG4gIHZhciBkdCA9IChtc2VjcyAtIF9sYXN0TVNlY3MpICsgKG5zZWNzIC0gX2xhc3ROU2VjcykvMTAwMDA7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIEJ1bXAgY2xvY2tzZXEgb24gY2xvY2sgcmVncmVzc2lvblxuICBpZiAoZHQgPCAwICYmIG9wdGlvbnMuY2xvY2tzZXEgPT09IHVuZGVmaW5lZCkge1xuICAgIGNsb2Nrc2VxID0gY2xvY2tzZXEgKyAxICYgMHgzZmZmO1xuICB9XG5cbiAgLy8gUmVzZXQgbnNlY3MgaWYgY2xvY2sgcmVncmVzc2VzIChuZXcgY2xvY2tzZXEpIG9yIHdlJ3ZlIG1vdmVkIG9udG8gYSBuZXdcbiAgLy8gdGltZSBpbnRlcnZhbFxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfVxuXG4gIC8vIFBlciA0LjIuMS4yIFRocm93IGVycm9yIGlmIHRvbyBtYW55IHV1aWRzIGFyZSByZXF1ZXN0ZWRcbiAgaWYgKG5zZWNzID49IDEwMDAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1dWlkLnYxKCk6IENhblxcJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjJyk7XG4gIH1cblxuICBfbGFzdE1TZWNzID0gbXNlY3M7XG4gIF9sYXN0TlNlY3MgPSBuc2VjcztcbiAgX2Nsb2Nrc2VxID0gY2xvY2tzZXE7XG5cbiAgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG4gIG1zZWNzICs9IDEyMjE5MjkyODAwMDAwO1xuXG4gIC8vIGB0aW1lX2xvd2BcbiAgdmFyIHRsID0gKChtc2VjcyAmIDB4ZmZmZmZmZikgKiAxMDAwMCArIG5zZWNzKSAlIDB4MTAwMDAwMDAwO1xuICBiW2krK10gPSB0bCA+Pj4gMjQgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gMTYgJiAweGZmO1xuICBiW2krK10gPSB0bCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsICYgMHhmZjtcblxuICAvLyBgdGltZV9taWRgXG4gIHZhciB0bWggPSAobXNlY3MgLyAweDEwMDAwMDAwMCAqIDEwMDAwKSAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjtcblxuICAvLyBgdGltZV9oaWdoX2FuZF92ZXJzaW9uYFxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmO1xuXG4gIC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7XG5cbiAgLy8gYGNsb2NrX3NlcV9sb3dgXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjtcblxuICAvLyBgbm9kZWBcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmID8gYnVmIDogYnl0ZXNUb1V1aWQoYik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjE7XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiAgSW4gdGhlXG4vLyBicm93c2VyIHRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQgZHVlIHRvIHVua25vd24gcXVhbGl0eSBvZiBNYXRoLnJhbmRvbSgpXG4vLyBhbmQgaW5jb25zaXN0ZW50IHN1cHBvcnQgZm9yIHRoZSBgY3J5cHRvYCBBUEkuICBXZSBkbyB0aGUgYmVzdCB3ZSBjYW4gdmlhXG4vLyBmZWF0dXJlLWRldGVjdGlvblxuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG9cbi8vIGltcGxlbWVudGF0aW9uLiBBbHNvLCBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gb24gSUUxMS5cbnZhciBnZXRSYW5kb21WYWx1ZXMgPSAodHlwZW9mKGNyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG1zQ3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyA9PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSk7XG5cbmlmIChnZXRSYW5kb21WYWx1ZXMpIHtcbiAgLy8gV0hBVFdHIGNyeXB0byBSTkcgLSBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvQ3J5cHRvXG4gIHZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd2hhdHdnUk5HKCkge1xuICAgIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG4gICAgcmV0dXJuIHJuZHM4O1xuICB9O1xufSBlbHNlIHtcbiAgLy8gTWF0aC5yYW5kb20oKS1iYXNlZCAoUk5HKVxuICAvL1xuICAvLyBJZiBhbGwgZWxzZSBmYWlscywgdXNlIE1hdGgucmFuZG9tKCkuICBJdCdzIGZhc3QsIGJ1dCBpcyBvZiB1bnNwZWNpZmllZFxuICAvLyBxdWFsaXR5LlxuICB2YXIgcm5kcyA9IG5ldyBBcnJheSgxNik7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXRoUk5HKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCByOyBpIDwgMTY7IGkrKykge1xuICAgICAgaWYgKChpICYgMHgwMykgPT09IDApIHIgPSBNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwMDA7XG4gICAgICBybmRzW2ldID0gciA+Pj4gKChpICYgMHgwMykgPDwgMykgJiAweGZmO1xuICAgIH1cblxuICAgIHJldHVybiBybmRzO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9VdWlkKGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gb2Zmc2V0IHx8IDA7XG4gIHZhciBidGggPSBieXRlVG9IZXg7XG4gIC8vIGpvaW4gdXNlZCB0byBmaXggbWVtb3J5IGlzc3VlIGNhdXNlZCBieSBjb25jYXRlbmF0aW9uOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMTc1I2M0XG4gIHJldHVybiAoW2J0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sIFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1dKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcbiIsImltcG9ydCB7IERvd25sb2FkZXIgfSBmcm9tIFwiLi9Eb3dubG9hZGVyXCI7XG5cbmZ1bmN0aW9uIGNvbmNhdGVuYXRlKHJlc3VsdENvbnN0cnVjdG9yOiBhbnksIC4uLmFycmF5czogYW55KSB7XG4gIGxldCB0b3RhbExlbmd0aCA9IDA7XG4gIGZvciAobGV0IGFyciBvZiBhcnJheXMpIHtcbiAgICAgIHRvdGFsTGVuZ3RoICs9IGFyci5sZW5ndGg7XG4gIH1cbiAgbGV0IHJlc3VsdCA9IG5ldyByZXN1bHRDb25zdHJ1Y3Rvcih0b3RhbExlbmd0aCk7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBmb3IgKGxldCBhcnIgb2YgYXJyYXlzKSB7XG4gICAgICByZXN1bHQuc2V0KGFyciwgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSBhcnIubGVuZ3RoO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbW9yeURvd25sb2FkZXIgaW1wbGVtZW50cyBEb3dubG9hZGVyIHtcbiAgZG93bmxvYWQoc3JjOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgZmV0Y2goc3JjKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgLy8gcmVzcG9uc2UuYm9keSBpcyBhIHJlYWRhYmxlIHN0cmVhbS5cbiAgICAgICAgLy8gQ2FsbGluZyBnZXRSZWFkZXIoKSBnaXZlcyB1cyBleGNsdXNpdmUgYWNjZXNzIHRvXG4gICAgICAgIC8vIHRoZSBzdHJlYW0ncyBjb250ZW50XG4gICAgICAgIHZhciByZWFkZXIgPSByZXNwb25zZS5ib2R5ISEuZ2V0UmVhZGVyKCk7XG4gICAgICAgIHZhciBieXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgbGV0IGNvbnRlbnQ6IGFueSA9IFtdO1xuXG4gICAgICAgIC8vIHJlYWQoKSByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gICAgICAgIC8vIHdoZW4gYSB2YWx1ZSBoYXMgYmVlbiByZWNlaXZlZFxuICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uIHByb2Nlc3NSZXN1bHQocmVzdWx0KTogYW55IHtcbiAgICAgICAgICAvLyBSZXN1bHQgb2JqZWN0cyBjb250YWluIHR3byBwcm9wZXJ0aWVzOlxuICAgICAgICAgIC8vIGRvbmUgIC0gdHJ1ZSBpZiB0aGUgc3RyZWFtIGhhcyBhbHJlYWR5IGdpdmVuXG4gICAgICAgICAgLy8gICAgICAgICB5b3UgYWxsIGl0cyBkYXRhLlxuICAgICAgICAgIC8vIHZhbHVlIC0gc29tZSBkYXRhLiBBbHdheXMgdW5kZWZpbmVkIHdoZW5cbiAgICAgICAgICAvLyAgICAgICAgIGRvbmUgaXMgdHJ1ZS5cbiAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggY29tcGxldGVcIik7XG4gICAgICAgICAgICBjb25zdCB0eXBlZEFycmF5ID0gY29uY2F0ZW5hdGUoVWludDhBcnJheSwgLi4uY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKFxuICAgICAgICAgICAgICBuZXcgQmxvYihbdHlwZWRBcnJheS5idWZmZXJdLCB7dHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSd9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc29sdmUob2JqZWN0VVJMKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZW50LnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAvLyByZXN1bHQudmFsdWUgZm9yIGZldGNoIHN0cmVhbXMgaXMgYSBVaW50OEFycmF5XG4gICAgICAgICAgYnl0ZXNSZWNlaXZlZCArPSByZXN1bHQudmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCcsIGJ5dGVzUmVjZWl2ZWQsICdieXRlcyBvZiBkYXRhIHNvIGZhcicpO1xuXG4gICAgICAgICAgLy8gUmVhZCBzb21lIG1vcmUsIGFuZCBjYWxsIHRoaXMgZnVuY3Rpb24gYWdhaW5cbiAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3NSZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHV1aWR2MSBmcm9tICd1dWlkL3YxJztcbmltcG9ydCB7IERvd25sb2FkZXIgfSBmcm9tIFwiLi9Eb3dubG9hZGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVTeXN0ZW1Eb3dubG9hZGVyIGltcGxlbWVudHMgRG93bmxvYWRlciB7XG4gIGRvd25sb2FkKHNyYzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gdXRpbCBoYW5kbGVyIHVzZWQgYmVsb3dcbiAgICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IChlcnI6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfTtcblxuICAgICAgLy8gYWNjZXNzaW5nIEZpbGVTeXN0ZW0gQVBJc1xuICAgICAgY29uc3QgcmVxdWVzdEZpbGVTeXN0ZW0gPSAod2luZG93IGFzIGFueSkucmVxdWVzdEZpbGVTeXN0ZW0gfHxcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtO1xuXG4gICAgICBjb25zdCBvbkluaXRGcyA9IChmaWxlU3lzdGVtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5lZCBmaWxlIHN5c3RlbTogJyArIGZpbGVTeXN0ZW0ubmFtZSk7XG4gICAgICAgIC8vIHNlY3VyZSBhY2Nlc3MgdG8gZmlsZSBiZWZvcmUgZG93bmxvYWRpbmcgZGF0YVxuICAgICAgICBmaWxlU3lzdGVtLnJvb3QuZ2V0RmlsZShgJHt1dWlkdjEoKX0ucGRmYCwge2NyZWF0ZTogdHJ1ZX0sIChmaWxlRW50cnk6IGFueSkgPT4ge1xuICAgICAgICAgIGZldGNoKHNyYykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAvLyByZXNwb25zZS5ib2R5IGlzIGEgcmVhZGFibGUgc3RyZWFtLlxuICAgICAgICAgICAgLy8gQ2FsbGluZyBnZXRSZWFkZXIoKSBnaXZlcyB1cyBleGNsdXNpdmUgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyB0aGUgc3RyZWFtJ3MgY29udGVudFxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhIS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHZhciBieXRlc1JlY2VpdmVkID0gMDtcblxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc1Jlc3VsdCA9IGFzeW5jIChyZXN1bHQ6IGFueSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgLy8gcmVzb2x2aW5nIHdpdGggZG93bmxvYWQgbGluayBvbmNlIGFsbCBkYXRhIGhhcyBiZWVuIGRvd25sb2FkZWRcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZpbGVFbnRyeS50b1VSTCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlQ2h1bmtPbkZpbGUoZmlsZUVudHJ5LCByZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkICs9IHJlc3VsdC52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBKdXN0IHJlY2VpdmVkICR7cmVzdWx0LnZhbHVlLmxlbmd0aH0gYnl0ZXNgKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkJywgYnl0ZXNSZWNlaXZlZCwgJ2J5dGVzIG9mIGRhdGEgc28gZmFyJyk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbihwcm9jZXNzUmVzdWx0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbihwcm9jZXNzUmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZXJyb3JIYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdEZpbGVTeXN0ZW0oXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5URU1QT1JBUlksXG4gICAgICAgIDUqMzAwKjEwMjQqMTAyNCAvKjMwME1CKi8sXG4gICAgICAgIG9uSW5pdEZzLFxuICAgICAgICBlcnJvckhhbmRsZXJcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHdyaXRlQ2h1bmtPbkZpbGUoZmlsZUVudHJ5OiBhbnksIGRhdGE6IFVpbnQ4QXJyYXkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZmlsZUVudHJ5LmNyZWF0ZVdyaXRlcigoZmlsZVdyaXRlcjogYW55KSA9PiB7XG4gICAgICAgIGZpbGVXcml0ZXIub253cml0ZWVuZCA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV3JpdGUgY29tcGxldGVkLicpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVXcml0ZXIub25lcnJvciA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXcml0ZSBmYWlsZWQ6ICcgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhgd3JpdHRlbiBzbyBmYXIgPSAke2ZpbGVXcml0ZXIubGVuZ3RofWApO1xuICAgICAgICBmaWxlV3JpdGVyLnNlZWsoZmlsZVdyaXRlci5sZW5ndGgpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBCbG9iIGFuZCB3cml0ZSBpdC5cbiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nfSk7XG5cbiAgICAgICAgZmlsZVdyaXRlci53cml0ZShibG9iKTtcbiAgICAgIH0sIChlcnI6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgeyBEb3dubG9hZGVyIH0gZnJvbSBcIi4vRG93bmxvYWRlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW1wbGVEb3dubG9hZGVyIGltcGxlbWVudHMgRG93bmxvYWRlciB7XG4gIGRvd25sb2FkKHNyYzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNyYyk7XG4gIH1cbn0iLCJpbXBvcnQgY3JlYXRlRG93bmxvYWRlciBmcm9tICcuL2Rvd25sb2FkZXJGYWN0b3J5JztcblxuLy8gdGhpcyB3b3VsZCBiZSBub3JtYWxseSBhdmFpbGFibGUgYXMgbWV0YWRhdGEgb2YgdGhlIGZpbGVcbmNvbnN0IFRPVEFMX0JZVEVTID0gMTc0MTU2Nzg4O1xuXG5jb25zdCByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTtcblxuY29uc3Qgc3RhcnRBcHAgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jvb3QgYScpO1xuICAgIGNvbnN0IGxvYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsb2FkaW5nLmNsYXNzTmFtZSA9ICdsb2FkaW5nJztcbiAgICBsb2FkaW5nLmlubmVySFRNTCA9IFwiTG9hZGluZy4uLlwiO1xuICAgIHJvb3QucmVwbGFjZUNoaWxkKGxvYWRpbmcsIGFuY2hvcik7XG5cbiAgICBjb25zdCBkb3dubG9hZGVyID0gY3JlYXRlRG93bmxvYWRlcigpO1xuICAgIGNvbnN0IGRvd25sb2FkVVJMID0gYXdhaXQgZG93bmxvYWRlci5kb3dubG9hZCgnZmlsZXMvYm9vay5wZGYnKTtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYnV0dG9uLmhyZWYgPSBkb3dubG9hZFVSTDtcbiAgICBidXR0b24uZG93bmxvYWQgPSBcImJvb2sucGRmXCI7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9IFwiRG93bmxvYWRcIjtcblxuICAgIHJvb3QucmVwbGFjZUNoaWxkKGJ1dHRvbiwgbG9hZGluZyk7XG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9XG59XG5cbnN0YXJ0QXBwKCk7XG4iLCJpbXBvcnQgTWVtb3J5RG93bmxvYWRlciBmcm9tIFwiLi9kb3dubG9hZGVycy9NZW1vcnlEb3dubG9hZGVyXCI7XG5pbXBvcnQgRmlsZVN5c3RlbURvd25sb2FkZXIgZnJvbSBcIi4vZG93bmxvYWRlcnMvRmlsZVN5c3RlbURvd25sb2FkZXJcIjtcbmltcG9ydCBTaW1wbGVEb3dubG9hZGVyIGZyb20gXCIuL2Rvd25sb2FkZXJzL1NpbXBsZURvd25sb2FkZXJcIjtcbmltcG9ydCB7IERvd25sb2FkZXIgfSBmcm9tIFwiLi9kb3dubG9hZGVycy9Eb3dubG9hZGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZURvd25sb2FkZXIoKTogRG93bmxvYWRlciB7XG4gIC8qKlxuICAgKiBGaXJzdCBvZiBhbGwgY2hlY2tzIGlmIHN0cmVhbXMgYW5kIGZldGNoIGFyZSBhdmFpbGFibGUsIHRoZW5cbiAgICogY2hlY2tzIGZvciBGaWxlU3lzdGVtIEFQSXMgYXZhaWxhYmlsaXR5LCBmYWxsaW5nIGJhY2sgdG9cbiAgICogYW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uLlxuICAgKiBJZiBzdHJlYW1zIGFuZCBmZXRjaCBhcmUgbm90IGF2YWlsYWJsZSxcbiAgICogcmV0dXJucyBhbiBcImlkZW50aXR5XCIgaW1wbGVtZW50YXRpb24uXG4gICAqXG4gICAqIEZpbGVTeXN0ZW1Eb3dubG9hZGVyIGFuZCBNZW1vcnkgdXNlIEN1c3RvbUV2ZW50IGFzIHdlbGwsIHRoYXQgaXNcbiAgICogc3VwcG9ydGVkIGJ5IGV2ZXJ5IGJyb3dzZXIgc3VwcG9ydGluZyBSZWFkYWJsZVN0cmVhbXMsXG4gICAqIHRoYXQncyB3aHkgSSdtIG5vdCBjaGVja2luZyBleHBsaWNpdGx5XG4gICAqL1xuICBjb25zdCByZXF1ZXN0RmlsZVN5c3RlbSA9ICh3aW5kb3cgYXMgYW55KS5yZXF1ZXN0RmlsZVN5c3RlbSB8fFxuICAgICh3aW5kb3cgYXMgYW55KS53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbTtcbiAgY29uc3QgZmV0Y2hBbmRTdHJlYW1zRXhpc3RzID0gISEod2luZG93IGFzIGFueSkuZmV0Y2ggJiZcbiAgICAhISh3aW5kb3cgYXMgYW55KS5SZWFkYWJsZVN0cmVhbTtcblxuICBpZihmZXRjaEFuZFN0cmVhbXNFeGlzdHMpIHtcbiAgICBpZiAocmVxdWVzdEZpbGVTeXN0ZW0pIHtcbiAgICAgIHJldHVybiBuZXcgRmlsZVN5c3RlbURvd25sb2FkZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBNZW1vcnlEb3dubG9hZGVyKCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgU2ltcGxlRG93bmxvYWRlcigpO1xuICB9XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==