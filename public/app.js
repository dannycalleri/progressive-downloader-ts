!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){var r,o,i=t(1),u=t(2),c=0,a=0;e.exports=function(e,n,t){var l=n&&t||0,f=n||[],s=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:o;if(null==s||null==d){var p=i();null==s&&(s=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var y=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:a+1,h=y-c+(v-a)/1e4;if(h<0&&void 0===e.clockseq&&(d=d+1&16383),(h<0||y>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=y,a=v,o=d;var w=(1e4*(268435455&(y+=122192928e5))+v)%4294967296;f[l++]=w>>>24&255,f[l++]=w>>>16&255,f[l++]=w>>>8&255,f[l++]=255&w;var b=y/4294967296*1e4&268435455;f[l++]=b>>>8&255,f[l++]=255&b,f[l++]=b>>>24&15|16,f[l++]=b>>>16&255,f[l++]=d>>>8|128,f[l++]=255&d;for(var m=0;m<6;++m)f[l+m]=s[m];return n||u(f)}},function(e,n){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o}}},function(e,n){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,n,t){"use strict";t.r(n);var r=function(){function e(){}return e.prototype.download=function(e){return new Promise(function(n){fetch(e).then(function(e){var t=e.body.getReader(),r=0,o=[];return t.read().then(function e(i){if(!i.done)return o.push(i.value),r+=i.value.length,console.log("Received",r,"bytes of data so far"),t.read().then(e);console.log("Fetch complete");var u=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0,o=0,i=n;o<i.length;o++)r+=(f=i[o]).length;for(var u=new e(r),c=0,a=0,l=n;a<l.length;a++){var f=l[a];u.set(f,c),c+=f.length}return u}.apply(void 0,[Uint8Array].concat(o)),c=URL.createObjectURL(new Blob([u.buffer],{type:"application/octet-stream"}));n(c)})})})},e}(),o=t(0),i=t.n(o),u=function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},c=function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},a=function(){function e(){}return e.prototype.download=function(e){var n=this;return new Promise(function(t,r){var o=function(e){console.error(e),r(e)};(window.requestFileSystem||window.webkitRequestFileSystem)(window.TEMPORARY,1572864e3,function(r){console.log("Opened file system: "+r.name),r.root.getFile(i()()+".pdf",{create:!0},function(r){fetch(e).then(function(e){var o=e.body.getReader(),i=0,a=function(e){return u(n,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return e.done?(console.log("Fetch complete"),t(r.toURL()),[2]):[4,this.writeChunkOnFile(r,e.value)];case 1:return n.sent(),i+=e.value.length,console.log("Just received "+e.value.length+" bytes"),console.log("Received",i,"bytes of data so far"),[2,o.read().then(a)]}})})};return o.read().then(a)})},o)},o)})},e.prototype.writeChunkOnFile=function(e,n){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,new Promise(function(t,r){e.createWriter(function(e){e.onwriteend=function(e){t(),console.log("Write completed.")},e.onerror=function(e){r(),console.log("Write failed: "+e.toString())},console.log("written so far = "+e.length),e.seek(e.length);var o=new Blob([n],{type:"application/octet-stream"});e.write(o)},function(e){throw console.error(e),new Error(e)})})]})})},e}();var l=function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,c)}a((r=r.apply(e,n||[])).next())})},f=function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=document.getElementById("root");l(void 0,void 0,void 0,function(){var e,n,t,o,i;return f(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e=document.querySelector("#root a"),(n=document.createElement("div")).className="loading",n.innerHTML="Loading...",s.replaceChild(n,e),[4,(window.requestFileSystem||window.webkitRequestFileSystem?new a:new r).download("files/book.pdf")];case 1:return t=u.sent(),(o=document.createElement("a")).href=t,o.download="book.pdf",o.innerHTML="Download",s.replaceChild(o,n),[3,3];case 2:return i=u.sent(),console.error(i),[3,3];case 3:return[2]}})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL3JuZy1icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlcnMvTWVtb3J5RG93bmxvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlcnMvRmlsZVN5c3RlbURvd25sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZG93bmxvYWRlckZhY3RvcnkudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm9wdGlvbnMiLCJidWYiLCJvZmZzZXQiLCJiIiwibm9kZSIsImNsb2Nrc2VxIiwidW5kZWZpbmVkIiwic2VlZEJ5dGVzIiwibXNlY3MiLCJEYXRlIiwiZ2V0VGltZSIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwid2luZG93IiwibXNDcnlwdG8iLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmRzIiwiQXJyYXkiLCJNYXRoIiwicmFuZG9tIiwiYnl0ZVRvSGV4IiwidG9TdHJpbmciLCJzdWJzdHIiLCJidGgiLCJqb2luIiwiTWVtb3J5RG93bmxvYWRlciIsImRvd25sb2FkIiwic3JjIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInJlYWRlciIsImJvZHkiLCJnZXRSZWFkZXIiLCJieXRlc1JlY2VpdmVkIiwiY29udGVudCIsInJlYWQiLCJwcm9jZXNzUmVzdWx0IiwicmVzdWx0IiwiZG9uZSIsInB1c2giLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwidHlwZWRBcnJheSIsInJlc3VsdENvbnN0cnVjdG9yIiwiYXJyYXlzIiwiX2kiLCJhcmd1bWVudHMiLCJ0b3RhbExlbmd0aCIsIl9hIiwiYXJyYXlzXzEiLCJhcnIiLCJfYiIsImFycmF5c18yIiwic2V0IiwiYXBwbHkiLCJjb25jYXQiLCJvYmplY3RVUkwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJCbG9iIiwiYnVmZmVyIiwidHlwZSIsIkZpbGVTeXN0ZW1Eb3dubG9hZGVyIiwiX3RoaXMiLCJ0aGlzIiwicmVqZWN0IiwiZXJyb3JIYW5kbGVyIiwiZXJyIiwiZXJyb3IiLCJyZXF1ZXN0RmlsZVN5c3RlbSIsIndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtIiwiVEVNUE9SQVJZIiwiZmlsZVN5c3RlbSIsInJvb3QiLCJnZXRGaWxlIiwidjFfZGVmYXVsdCIsImZpbGVFbnRyeSIsIl9fYXdhaXRlciIsInRvVVJMIiwid3JpdGVDaHVua09uRmlsZSIsInNlbnQiLCJkYXRhIiwiY3JlYXRlV3JpdGVyIiwiZmlsZVdyaXRlciIsIm9ud3JpdGVlbmQiLCJlIiwib25lcnJvciIsInNlZWsiLCJibG9iIiwid3JpdGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYXBwX2F3YWl0ZXIiLCJhbmNob3IiLCJxdWVyeVNlbGVjdG9yIiwibG9hZGluZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJyZXBsYWNlQ2hpbGQiLCJkb3dubG9hZGVyc19GaWxlU3lzdGVtRG93bmxvYWRlciIsImRvd25sb2FkZXJzX01lbW9yeURvd25sb2FkZXIiLCJkb3dubG9hZFVSTCIsImJ1dHRvbiIsImhyZWYiLCJlcnJfMSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVB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QyxlQUFlLFFBRXBCQyxPQVBqQmhHLE9BT2lCLG1GQVNPLDZCQVBkaUcsRUFBU0gsU0FBU0ksY0FBYyxZQUNoQ0MsRUFBVUwsU0FBU00sY0FBYyxRQUMvQkMsVUFBWSxVQUNwQkYsRUFBUUcsVUFBWSxhQUNwQnpCLEVBQUswQixhQUFhSixFQUFTRixHQUdQLElDUktyRixPQUFlNkQsbUJBQ3ZDN0QsT0FBZThELHdCQUVULElBQUk4QixFQUVKLElBQUlDLEdERzBCL0UsU0FBUyxpQ0FBeENnRixFQUFjdEQsRUFBQWdDLFFBQ2R1QixFQUFTYixTQUFTTSxjQUFjLE1BQy9CUSxLQUFPRixFQUNkQyxFQUFPakYsU0FBVyxXQUNsQmlGLEVBQU9MLFVBQVksV0FFbkJ6QixFQUFLMEIsYUFBYUksRUFBUVIsa0NBRTFCdkQsUUFBUTRCLE1BQU1xQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5cbnZhciBfbm9kZUlkO1xudmFyIF9jbG9ja3NlcTtcblxuLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG52YXIgX2xhc3RNU2VjcyA9IDA7XG52YXIgX2xhc3ROU2VjcyA9IDA7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYnJvb2ZhL25vZGUtdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICB2YXIgYiA9IGJ1ZiB8fCBbXTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgdmFyIGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTtcblxuICAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgdmFyIHNlZWRCeXRlcyA9IHJuZygpO1xuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbXG4gICAgICAgIHNlZWRCeXRlc1swXSB8IDB4MDEsXG4gICAgICAgIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH1cblxuICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgdmFyIG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH1cblxuICAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9XG5cbiAgLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gIC8vIGB0aW1lX21pZGBcbiAgdmFyIHRtaCA9IChtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDApICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmO1xuXG4gIC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7XG5cbiAgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAvLyBgY2xvY2tfc2VxX2xvd2BcbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmO1xuXG4gIC8vIGBub2RlYFxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgPyBidWYgOiBieXRlc1RvVXVpZChiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2MTtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iLCIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcbiAgcmV0dXJuIChbYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXV0pLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ5dGVzVG9VdWlkO1xuIiwiaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL0Rvd25sb2FkZXJcIjtcblxuZnVuY3Rpb24gY29uY2F0ZW5hdGUocmVzdWx0Q29uc3RydWN0b3I6IGFueSwgLi4uYXJyYXlzOiBhbnkpIHtcbiAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgZm9yIChsZXQgYXJyIG9mIGFycmF5cykge1xuICAgICAgdG90YWxMZW5ndGggKz0gYXJyLmxlbmd0aDtcbiAgfVxuICBsZXQgcmVzdWx0ID0gbmV3IHJlc3VsdENvbnN0cnVjdG9yKHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAobGV0IGFyciBvZiBhcnJheXMpIHtcbiAgICAgIHJlc3VsdC5zZXQoYXJyLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IGFyci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVtb3J5RG93bmxvYWRlciBpbXBsZW1lbnRzIERvd25sb2FkZXIge1xuICBkb3dubG9hZChzcmM6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBmZXRjaChzcmMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAvLyByZXNwb25zZS5ib2R5IGlzIGEgcmVhZGFibGUgc3RyZWFtLlxuICAgICAgICAvLyBDYWxsaW5nIGdldFJlYWRlcigpIGdpdmVzIHVzIGV4Y2x1c2l2ZSBhY2Nlc3MgdG9cbiAgICAgICAgLy8gdGhlIHN0cmVhbSdzIGNvbnRlbnRcbiAgICAgICAgdmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhIS5nZXRSZWFkZXIoKTtcbiAgICAgICAgdmFyIGJ5dGVzUmVjZWl2ZWQgPSAwO1xuICAgICAgICBsZXQgY29udGVudDogYW55ID0gW107XG5cbiAgICAgICAgLy8gcmVhZCgpIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXNcbiAgICAgICAgLy8gd2hlbiBhIHZhbHVlIGhhcyBiZWVuIHJlY2VpdmVkXG4gICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oZnVuY3Rpb24gcHJvY2Vzc1Jlc3VsdChyZXN1bHQpOiBhbnkge1xuICAgICAgICAgIC8vIFJlc3VsdCBvYmplY3RzIGNvbnRhaW4gdHdvIHByb3BlcnRpZXM6XG4gICAgICAgICAgLy8gZG9uZSAgLSB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGFscmVhZHkgZ2l2ZW5cbiAgICAgICAgICAvLyAgICAgICAgIHlvdSBhbGwgaXRzIGRhdGEuXG4gICAgICAgICAgLy8gdmFsdWUgLSBzb21lIGRhdGEuIEFsd2F5cyB1bmRlZmluZWQgd2hlblxuICAgICAgICAgIC8vICAgICAgICAgZG9uZSBpcyB0cnVlLlxuICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGZXRjaCBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVkQXJyYXkgPSBjb25jYXRlbmF0ZShVaW50OEFycmF5LCAuLi5jb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdFVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoXG4gICAgICAgICAgICAgIG5ldyBCbG9iKFt0eXBlZEFycmF5LmJ1ZmZlcl0sIHt0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJ30pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzb2x2ZShvYmplY3RVUkwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRlbnQucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgIC8vIHJlc3VsdC52YWx1ZSBmb3IgZmV0Y2ggc3RyZWFtcyBpcyBhIFVpbnQ4QXJyYXlcbiAgICAgICAgICBieXRlc1JlY2VpdmVkICs9IHJlc3VsdC52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkJywgYnl0ZXNSZWNlaXZlZCwgJ2J5dGVzIG9mIGRhdGEgc28gZmFyJyk7XG5cbiAgICAgICAgICAvLyBSZWFkIHNvbWUgbW9yZSwgYW5kIGNhbGwgdGhpcyBmdW5jdGlvbiBhZ2FpblxuICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4ocHJvY2Vzc1Jlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgdXVpZHYxIGZyb20gJ3V1aWQvdjEnO1xuaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL0Rvd25sb2FkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZVN5c3RlbURvd25sb2FkZXIgaW1wbGVtZW50cyBEb3dubG9hZGVyIHtcbiAgZG93bmxvYWQoc3JjOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyB1dGlsIGhhbmRsZXIgdXNlZCBiZWxvd1xuICAgICAgY29uc3QgZXJyb3JIYW5kbGVyID0gKGVycjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXF1ZXN0RmlsZVN5c3RlbSA9ICh3aW5kb3cgYXMgYW55KS5yZXF1ZXN0RmlsZVN5c3RlbSB8fFxuICAgICAgICAod2luZG93IGFzIGFueSkud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW07XG4gICAgICBjb25zdCBvbkluaXRGcyA9IChmaWxlU3lzdGVtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5lZCBmaWxlIHN5c3RlbTogJyArIGZpbGVTeXN0ZW0ubmFtZSk7XG4gICAgICAgIC8vIHNlY3VyZSBhY2Nlc3MgdG8gZmlsZSBiZWZvcmUgZG93bmxvYWRpbmcgZGF0YVxuICAgICAgICBmaWxlU3lzdGVtLnJvb3QuZ2V0RmlsZShgJHt1dWlkdjEoKX0ucGRmYCwge2NyZWF0ZTogdHJ1ZX0sIChmaWxlRW50cnk6IGFueSkgPT4ge1xuICAgICAgICAgIGZldGNoKHNyYykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAvLyByZXNwb25zZS5ib2R5IGlzIGEgcmVhZGFibGUgc3RyZWFtLlxuICAgICAgICAgICAgLy8gQ2FsbGluZyBnZXRSZWFkZXIoKSBnaXZlcyB1cyBleGNsdXNpdmUgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyB0aGUgc3RyZWFtJ3MgY29udGVudFxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhIS5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHZhciBieXRlc1JlY2VpdmVkID0gMDtcblxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc1Jlc3VsdCA9IGFzeW5jIChyZXN1bHQ6IGFueSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgLy8gcmVzb2x2aW5nIHdpdGggZG93bmxvYWQgbGlua1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmlsZUVudHJ5LnRvVVJMKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVDaHVua09uRmlsZShmaWxlRW50cnksIHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQgKz0gcmVzdWx0LnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYEp1c3QgcmVjZWl2ZWQgJHtyZXN1bHQudmFsdWUubGVuZ3RofSBieXRlc2ApO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQnLCBieXRlc1JlY2VpdmVkLCAnYnl0ZXMgb2YgZGF0YSBzbyBmYXInKTtcblxuICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3NSZXN1bHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3NSZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBlcnJvckhhbmRsZXIpO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0RmlsZVN5c3RlbShcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLlRFTVBPUkFSWSxcbiAgICAgICAgNSozMDAqMTAyNCoxMDI0IC8qMzAwTUIqLyxcbiAgICAgICAgb25Jbml0RnMsXG4gICAgICAgIGVycm9ySGFuZGxlclxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgd3JpdGVDaHVua09uRmlsZShmaWxlRW50cnk6IGFueSwgZGF0YTogVWludDhBcnJheSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmaWxlRW50cnkuY3JlYXRlV3JpdGVyKChmaWxlV3JpdGVyOiBhbnkpID0+IHtcbiAgICAgICAgZmlsZVdyaXRlci5vbndyaXRlZW5kID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXcml0ZSBjb21wbGV0ZWQuJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZmlsZVdyaXRlci5vbmVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1dyaXRlIGZhaWxlZDogJyArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKGB3cml0dGVuIHNvIGZhciA9ICR7ZmlsZVdyaXRlci5sZW5ndGh9YCk7XG4gICAgICAgIGZpbGVXcml0ZXIuc2VlayhmaWxlV3JpdGVyLmxlbmd0aCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IEJsb2IgYW5kIHdyaXRlIGl0LlxuICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSd9KTtcblxuICAgICAgICBmaWxlV3JpdGVyLndyaXRlKGJsb2IpO1xuICAgICAgfSwgKGVycjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCBjcmVhdGVEb3dubG9hZGVyIGZyb20gJy4vZG93bmxvYWRlckZhY3RvcnknO1xuXG4vLyB0aGlzIHdvdWxkIGJlIG5vcm1hbGx5IGF2YWlsYWJsZSBhcyBtZXRhZGF0YSBvZiB0aGUgZmlsZVxuY29uc3QgVE9UQUxfQllURVMgPSAxNzQxNTY3ODg7XG5cbmNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuXG5jb25zdCBzdGFydEFwcCA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm9vdCBhJyk7XG4gICAgY29uc3QgbG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxvYWRpbmcuY2xhc3NOYW1lID0gJ2xvYWRpbmcnO1xuICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gXCJMb2FkaW5nLi4uXCI7XG4gICAgcm9vdC5yZXBsYWNlQ2hpbGQobG9hZGluZywgYW5jaG9yKTtcblxuICAgIGNvbnN0IGRvd25sb2FkZXIgPSBjcmVhdGVEb3dubG9hZGVyKCk7XG4gICAgY29uc3QgZG93bmxvYWRVUkwgPSBhd2FpdCBkb3dubG9hZGVyLmRvd25sb2FkKCdmaWxlcy9ib29rLnBkZicpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBidXR0b24uaHJlZiA9IGRvd25sb2FkVVJMO1xuICAgIGJ1dHRvbi5kb3dubG9hZCA9IFwiYm9vay5wZGZcIjtcbiAgICBidXR0b24uaW5uZXJIVE1MID0gXCJEb3dubG9hZFwiO1xuXG4gICAgcm9vdC5yZXBsYWNlQ2hpbGQoYnV0dG9uLCBsb2FkaW5nKTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH1cbn1cblxuc3RhcnRBcHAoKTtcbiIsImltcG9ydCBNZW1vcnlEb3dubG9hZGVyIGZyb20gXCIuL2Rvd25sb2FkZXJzL01lbW9yeURvd25sb2FkZXJcIjtcbmltcG9ydCBGaWxlU3lzdGVtRG93bmxvYWRlciBmcm9tIFwiLi9kb3dubG9hZGVycy9GaWxlU3lzdGVtRG93bmxvYWRlclwiO1xuaW1wb3J0IHsgRG93bmxvYWRlciB9IGZyb20gXCIuL2Rvd25sb2FkZXJzL0Rvd25sb2FkZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlRG93bmxvYWRlcigpOiBEb3dubG9hZGVyIHtcbiAgLyoqXG4gICAqIFJldHVybnNcbiAgICovXG4gIGNvbnN0IHJlcXVlc3RGaWxlU3lzdGVtID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVlc3RGaWxlU3lzdGVtIHx8XG4gICAgKHdpbmRvdyBhcyBhbnkpLndlYmtpdFJlcXVlc3RGaWxlU3lzdGVtO1xuICBpZiAocmVxdWVzdEZpbGVTeXN0ZW0pIHtcbiAgICByZXR1cm4gbmV3IEZpbGVTeXN0ZW1Eb3dubG9hZGVyKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBNZW1vcnlEb3dubG9hZGVyKCk7XG4gIH1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9